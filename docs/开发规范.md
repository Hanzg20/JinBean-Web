# 开发规范

## 多语言(i18n)开发与部署规范

### 1. 语言包 JSON 文件格式问题
- 语言包必须为**合法的 JSON**，**禁止添加注释**，禁止用 shell 命令拼接 JSON。
- 推荐用编辑器或专用 JSON 工具维护，必要时用 `jq` 检查格式：`jq . path/to/file.json`。

### 2. 多端/多目录语言包内容不一致
- 统一维护一份主语言包（如 `packages/i18n`），**所有端的 locales 文件均自动同步**，禁止手动分散维护。
- 新增/修改翻译时，**先改主语言包，再同步到各端**。

### 3. 缺失 namespace 或 key 导致类型错误
- **每个页面/组件用到的 namespace 必须在所有语言包中存在**，哪怕只加 meta_title、meta_description 占位。
- 新增页面时，**同步补充 namespace 到所有语言包**。

### 4. 自动化同步与校验
- 建议写自动脚本或在 CI 中校验：**所有 locales 必须和主语言包 key 完全一致**。
- 每次构建前自动覆盖同步，防止遗漏。

### 5. 注释与文档管理
- **禁止在 JSON 文件内写注释**，如需说明结构，单独写 markdown 文档（如 `zh.json.readme.md`）。

### 6. 常见命名规范
- **namespace 命名**：与页面/功能模块保持一致，首字母大写（如 `DashboardLayout`、`UserProfile`）。
- **key 命名**：推荐用小写加下划线或驼峰，保持一致性。

### 7. 构建与部署前自检清单
- 运行 `jq .` 检查所有 JSON 格式。
- 检查所有页面/组件用到的 namespace 是否在所有语言包中存在。
- 确认所有 locales 文件与主语言包内容一致。
- 禁止直接在 JSON 文件内加注释。 